<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Vajilla - Segunda Mano</title>
    <link rel="stylesheet" href="style/styles.css">
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <h1>Vajilla de Segunda Mano</h1>
        <p>Encuentra piezas únicas de calidad a precios accesibles</p>
        <p>La vajilla es de segunda, esto quiere decir que las imperfecciones son mínimas y de excelente calidad, son de la marca CRMK, podés googlear y no vas a encontrar estos precios. Apto para HORNO y MICROONDAS</p>
        <p>Podes pagar con TARJETA, EFECTIVO O TRANSFERENCIA</p>
    </section>

    <!-- Products Section -->
    <div class="container">
        <div id="productos-container" class="productos-grid">
            <div class="loading">Cargando productos...</div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/productos.js"></script>
    <script>
        // Obtener parámetros de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const usarPrecioAlCosto = urlParams.get('pc') === 'true';
        const verPrecioRecomendado = urlParams.get('ver') === 'true';

        // Función para crear una card de producto
        function crearProductoCard(producto) {
            const card = document.createElement('div');
            card.className = 'producto-card';

            // Seleccionar el precio basado en los parámetros 'pc' y 'ver'
            let precioAMostrar;
            if (usarPrecioAlCosto && verPrecioRecomendado) {
                // Si pc=true y ver=true, mostrar precioRecomendado
                precioAMostrar = producto.precioRecomendado;
            } else if (usarPrecioAlCosto) {
                // Si solo pc=true, mostrar precioAlCosto
                precioAMostrar = producto.precioAlCosto;
            } else {
                // Si no, mostrar precio normal
                precioAMostrar = producto.precio;
            }

            const precioHtml = typeof precioAMostrar === 'number'
                ? `$${precioAMostrar.toFixed(2)}`
                : precioAMostrar;

            let precioRecomendadoSection = '';
            // Solo mostrar la sección de precio recomendado si pc=true y ver NO es true
            if (usarPrecioAlCosto && !verPrecioRecomendado) {
                const precioRecomendadoHtml = typeof producto.precioRecomendado === 'number'
                    ? `$${producto.precioRecomendado.toFixed(2)}`
                    : producto.precioRecomendado;
                precioRecomendadoSection = `<div class="producto-precio-recomendado">Precio recomendado: ${precioRecomendadoHtml}</div>`;
            }

            card.innerHTML = `
                <div class="producto-imagen">
                    <img src="${producto.imagen}" alt="${producto.nombre}" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="producto-contenido">
                    <h3 class="producto-nombre">${producto.nombre}</h3>
                    <p class="producto-descripcion">${producto.descripcion}</p>
                    <div class="producto-precio">${precioHtml}</div>
                    ${precioRecomendadoSection}
                </div>
            `;

            return card;
        }

        // Cargar productos cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('productos-container');
            container.innerHTML = ''; // Limpiar el loading

            productos.forEach(producto => {
                const card = crearProductoCard(producto);
                container.appendChild(card);
            });

            // Ocultar el botón de WhatsApp si el parámetro 'pc' existe y es 'true'
            if (usarPrecioAlCosto) {
                const whatsappButton = document.querySelector('.whatsapp-button');
                if (whatsappButton) {
                    whatsappButton.style.display = 'none';
                }
            }
        });
    </script>

    <a
        href="https://wa.me/5491144261182"
        class="whatsapp-button"
        target="_blank"
        rel="noopener"
        aria-label="Contactar por WhatsApp"
    >
        <svg viewBox="0 0 32 32" aria-hidden="true">
            <path d="M16 3.1C9 3.1 3.2 8.9 3.2 16c0 2.3.6 4.4 1.7 6.3L3 29l6.9-1.8c1.8 1 3.8 1.6 6.1 1.6 7.1 0 12.9-5.8 12.9-12.9S23.1 3.1 16 3.1zm0 23.5c-2 0-3.8-.6-5.4-1.6l-.4-.2-4.1 1.1 1.1-4.1-.3-.4c-1-1.6-1.6-3.5-1.6-5.4 0-5.8 4.7-10.5 10.5-10.5S26.5 10.2 26.5 16 21.8 26.6 16 26.6zm6-7.6c-.3-.2-1.7-.8-1.9-.9-.3-.1-.5-.2-.7.2-.2.3-.8.9-.9 1-.2.2-.3.2-.6.1s-1.2-.4-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.4.1-.6.1-.1.3-.3.4-.5.1-.1.2-.3.3-.5.1-.2 0-.4 0-.5s-.7-1.8-1-2.4c-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.8.4-.3.3-1.1 1.1-1.1 2.7s1.1 3.1 1.3 3.3c.2.2 2.1 3.3 5.1 4.6.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.6.2-1.1.1-1.3-.1-.2-.3-.3-.6-.5z"/>
        </svg>
    </a>
</body>
</html>